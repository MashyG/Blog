
# 正则表达式

目录
[[toc]]

正则表达式处理各种任务：

- 操作 HTML 节点中的字符串
- 使用 CSS 选择器表达式定位部分选择器
- 判断一个元素是否含有特定的样式名称
- 从 Internet Explorer 的 filter 属性中提取透明度
- ...

## 正则表达式解释

> 通常被称为一个模式（pattern），是一个用简单方式描述或者匹配一系列符合某个句法规则的字符串。表达式本身包含了允许定义这些模式的术语和操作符

```js
var pattern = /test/  // 精确匹配字符串 'test'
```

**注意** 正则字面量是用**正斜杠**（'/xxx/'）进行界定的

或者我们可以构造一 RegExp 实例，将正则作为字符串传入：
`var pattern = new RegExp("test")`

**注意** 如果正则是已知的，则优先选择字面量语法，而构造器方式则是用于在*运行时*，通过动态构建字符串来构建正则表达式

除了表达本身，还有三个标志可以与正则表达式进行关联

- i —— 让正则表达式不区分大小写，所以 /test/i 不仅可以匹配 "test"，还可以匹配 "TEST"，"Test"等
- g —— 匹配模式中的所有实例，而不是默认只匹配第一次出现的结果
- m —— 允许匹配多个行，比如可以匹配文本区元素（textarea）中的值

### 术语与操作符

**精确匹配**🐍

```js
var pattern = /test/
```

**匹配一类字符**🐍

> 匹配一个有限字符集中的某一个字符

```js
var pattern = /[abc]/ // 匹配 a，b，c 中的任何一个字符
var pattern1 = /[^abc]/ // 匹配除了 a，b，c 中的任何一个字符
var pattern2 = /[a-m]/ // 匹配 a 到 m 中的之间的所有字符
```

**转义**🐍

> 并不是所有的字符和其他字符字面量都是等价的。像 $ 和 . 这样的特殊字符，表示的事他们自身以外的东西，或者表示为验证术语的操作符。
> 在正则里，使用反斜杠可以对任意字符进行转义，让被转义字符作为字符本身进行匹配

```js
var pattern = /\[/  // 匹配 [ 字符，而不是匹配表达式的开括号
// 两个反斜杠（\\）则匹配一个反斜杠
```

**匹配开始于匹配结束**🐍

```js
// ^：匹配开头
var start = /^test/ // 匹配以 test 开头的字符串
// $：匹配结尾
var start = /test$/ // 匹配以 test 结尾的字符串
```

**重复出现**🐍

- 在一个字符后面加一个问号（?），可以定义为该字符是可选的。例如：/t?est/ 可以匹配 "test" 和 "est"
- 如果一个字符要出现一次或多次，可以使用加号（+）。例如：/t+est/ 可以匹配 "test", "ttest", "tttest"，但不能匹配 "est"
- 如果一个字符要出现零次或多次，可以使用星号（\*）。例如：/t*est/ 可以匹配 "test", "ttest", "tttest", 以及 "est"
- 也可以在字符后面的花括号里指定一个数字来表示重复次数。例如：/a{4}/ 表示匹配含有连续四个 "a" 字符的字符串
- 也可以在字符后面的花括号里指定两个数组（用逗号隔开）来表示重复次数区间。例如：/a{4,,10}/ 表示匹配任何含有连续 4 个至 10 个 "a" 字符的字符串
- 次数区间的第二个值是可选的（但是要保留逗号），其表示一个开区间。例如：/a{4,}/ 表示匹配任何含有连续 4 个或多余 4 个 "a" 字符的字符串

**预定义字符类**🐍

|  预定义术语   |   匹配内容     |
|     ----    |     ----    |
| \t    |   水平制表符     |
| \b |     空格     |
| \v   | 垂直制表符 |
| \f    |   换页符     |
| \r |    回车      |
| \n   | 换行符 |
| \cA;\cZ    |   控制符，例如：\cM 匹配一个 Control-M     |
| \x000;\xFFF |    十六进制 Unicode 码      |
| \x00;\xFF   | 十六进制 ASCII 码 |
| .    |   匹配除了新行（\n）以外的任意字符     |
| \d |    匹配任意数字，等价于[0-9]      |
| \D   | 匹配任意非数字，等价于[^0-9] |
| \w |    匹配包括下划线的任意单词字符，等价于[A-Za-z0-9_]     |
| \W   | 匹配任何非单词字符，等价于[^A-Za-z0-9_] |
| \s |    匹配任何空白字符，包括空格、制表符、换页符等      |
| \S   | 匹配任何非空白字符 |
| \b |    匹配单词边界      |
| \B   | 匹配非单词边界 |

**分组**🐍
